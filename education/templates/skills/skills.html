{% extends 'core/base.html' %}
{% block title %}Skills & Education | {{ SITE_NAME }}{% endblock title %}
{% block content %}
<style>
  :root {
    --primary: #ff6b35;
    --primary-light: #ff8e53;
    --primary-dark: #e55a2b;
    --secondary: #1a1a1a;
    --accent: #2d3748;
    --text-primary: #ffffff;
    --text-secondary: #a0aec0;
    --gradient-primary: linear-gradient(135deg, #ff6b35, #ff8e53);
    --gradient-dark: linear-gradient(135deg, #1a1a1a, #2d1b1b);
    --shadow-primary: 0 10px 30px rgba(255, 107, 53, 0.3);
    --shadow-dark: 0 15px 40px rgba(0, 0, 0, 0.4);
  }

  .skills-hero {
    background: var(--gradient-dark);
    padding: 3rem 0;
    position: relative;
    overflow: hidden;
  }

  .skills-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 20% 80%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 107, 53, 0.1) 0%, transparent 50%);
  }

  .page-title {
    font-size: 3rem;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
    animation: slideInUp 1s ease;
  }

  .page-subtitle {
    color: var(--text-secondary);
    font-size: 1.2rem;
    animation: slideInUp 1s ease 0.2s both;
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin: 3rem 0;
  }

  .stat-card-premium {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 2rem;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .stat-card-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--gradient-primary);
    transform: scaleX(0);
    transition: transform 0.3s ease;
  }

  .stat-card-premium:hover::before {
    transform: scaleX(1);
  }

  .stat-card-premium:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
    box-shadow: var(--shadow-dark);
  }

  .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    color: white;
    font-size: 1.5rem;
  }

  .stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .skill-category-premium {
    margin-bottom: 3rem;
  }

  .category-header {
    background: var(--gradient-primary);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 15px 15px 0 0;
    margin-bottom: 0;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
  }

  .skill-card-premium {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .skill-card-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    transform: scaleX(0);
    transition: transform 0.3s ease;
  }

  .skill-card-premium:hover::before {
    transform: scaleX(1);
  }

  .skill-card-premium:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
    box-shadow: var(--shadow-dark);
  }

  .skill-bar-premium {
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
    margin: 1rem 0;
  }

  .skill-bar-fill-premium {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 10px;
    transition: width 1s ease-in-out;
    position: relative;
    overflow: hidden;
  }

  .skill-bar-fill-premium::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  .proficiency-badge-premium {
    background: rgba(255, 107, 53, 0.15);
    color: var(--primary-light);
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    border: 1px solid rgba(255, 107, 53, 0.3);
  }

  .education-card-premium {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    position: relative;
    border-left: 4px solid var(--primary);
  }

  .education-card-premium:hover {
    transform: translateX(5px);
    border-color: var(--primary);
    box-shadow: var(--shadow-dark);
  }

  .certification-card-premium {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    position: relative;
  }

  .certification-card-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(to bottom, #48bb78, #68d391);
    border-radius: 4px 0 0 4px;
  }

  .certification-card-premium:hover {
    transform: translateY(-3px);
    border-color: var(--primary);
    box-shadow: var(--shadow-dark);
  }

  .status-badge-premium {
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .status-valid-premium {
    background: rgba(72, 187, 120, 0.15);
    color: #68d391;
    border: 1px solid rgba(72, 187, 120, 0.3);
  }

  .status-expired-premium {
    background: rgba(245, 101, 101, 0.15);
    color: #fc8181;
    border: 1px solid rgba(245, 101, 101, 0.3);
  }

  .action-buttons-premium {
    position: absolute;
    top: 1rem;
    right: 1rem;
    display: flex;
    gap: 0.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .skill-card-premium:hover .action-buttons-premium,
  .education-card-premium:hover .action-buttons-premium,
  .certification-card-premium:hover .action-buttons-premium {
    opacity: 1;
  }

  .btn-edit-premium, .btn-delete-premium {
    width: 32px;
    height: 32px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: all 0.3s ease;
  }

  .btn-edit-premium {
    background: rgba(66, 153, 225, 0.15);
    border: 1px solid rgba(66, 153, 225, 0.3);
    color: #63b3ed;
  }

  .btn-delete-premium {
    background: rgba(245, 101, 101, 0.15);
    border: 1px solid rgba(245, 101, 101, 0.3);
    color: #fc8181;
  }

  .btn-edit-premium:hover, .btn-delete-premium:hover {
    transform: scale(1.1);
  }

  .degree-badge-premium {
    background: rgba(255, 107, 53, 0.15);
    color: var(--primary-light);
    padding: 0.4rem 1rem;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    border: 1px solid rgba(255, 107, 53, 0.3);
  }

  .gpa-badge-premium {
    background: rgba(66, 153, 225, 0.15);
    color: #63b3ed;
    padding: 0.3rem 0.8rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid rgba(66, 153, 225, 0.3);
  }

  .empty-state-premium {
    text-align: center;
    padding: 4rem 2rem;
    background: rgba(255, 255, 255, 0.02);
    border: 2px dashed rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    margin: 2rem 0;
  }

  .empty-state-icon-premium {
    font-size: 4rem;
    color: var(--primary);
    margin-bottom: 1.5rem;
    opacity: 0.7;
  }

  .floating-add-btn-premium {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    box-shadow: var(--shadow-primary);
    transition: all 0.3s ease;
  }

  .floating-add-btn-premium:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(255, 107, 53, 0.5);
  }

  .section-header-premium {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid rgba(255, 107, 53, 0.3);
  }

  .section-icon-premium {
    width: 50px;
    height: 50px;
    background: var(--gradient-primary);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    color: white;
  }

  @media (max-width: 768px) {
    .page-title { font-size: 2.5rem; }
    .stats-grid { grid-template-columns: 1fr; }
    .section-header-premium { flex-direction: column; align-items: flex-start; }
  }

  /* Action Buttons Hover Effects */
  .btn-warning:hover,
  .btn-info:hover,
  .btn-success:hover {
    transform: translateY(-3px);
  }

  .btn-warning:active,
  .btn-info:active,
  .btn-success:active {
    transform: translateY(0);
  }
</style>

<!-- Skills Hero Section -->
<section class="skills-hero">
  <div class="container">
    <div class="text-center text-white">
      <h1 class="page-title">Skills & Education</h1>
      <p class="page-subtitle">Comprehensive overview of my technical expertise and academic background</p>
    </div>
  </div>
</section>

<!-- Skills Content -->
<div class="container py-5">
  <!-- Action Buttons Section -->
  {% if user.is_authenticated %}
  <div class="d-flex justify-content-center gap-3 mb-5 flex-wrap">
    <a href="{% url 'skill_create' %}" class="btn btn-warning btn-lg" style="min-width: 200px; border-radius: 15px; font-weight: 600; box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4); transition: all 0.3s ease;">
      <i class="fa fa-plus-circle me-2"></i>Add New Skill
    </a>
    <a href="{% url 'education_create' %}" class="btn btn-info btn-lg" style="min-width: 200px; border-radius: 15px; font-weight: 600; box-shadow: 0 5px 15px rgba(66, 153, 225, 0.4); transition: all 0.3s ease;">
      <i class="fa fa-graduation-cap me-2"></i>Add Education
    </a>
    <a href="{% url 'certification_create' %}" class="btn btn-success btn-lg" style="min-width: 200px; border-radius: 15px; font-weight: 600; box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4); transition: all 0.3s ease;">
      <i class="fa fa-award me-2"></i>Add Certification
    </a>
  </div>
  {% endif %}

  <!-- Stats Overview -->
  <div class="stats-grid">
    <div class="stat-card-premium">
      <div class="stat-icon">
        <i class="fa fa-code"></i>
      </div>
      <div class="stat-number">{{ skills|length }}</div>
      <div class="stat-label">Technical Skills</div>
    </div>
    <div class="stat-card-premium">
      <div class="stat-icon">
        <i class="fa fa-university"></i>
      </div>
      <div class="stat-number">{{ education|length }}</div>
      <div class="stat-label">Education Records</div>
    </div>
    <div class="stat-card-premium">
      <div class="stat-icon">
        <i class="fa fa-award"></i>
      </div>
      <div class="stat-number">{{ certifications|length }}</div>
      <div class="stat-label">Certifications</div>
    </div>
  </div>

  <div class="row">
    <!-- Skills Section -->
    <div class="col-lg-8">
      <div class="section-header-premium">
        <div class="section-icon-premium">
          <i class="fa fa-code"></i>
        </div>
        <div>
          <h2 class="text-warning mb-1">Technical Skills</h2>
          <p class="text-white-50 mb-0">My expertise across different technologies and frameworks</p>
        </div>
      </div>

      <!-- Frontend Skills -->
      {% if frontend_skills %}
      <div class="skill-category-premium">
        <h3 class="category-header">
          <i class="fab fa-html5"></i> Frontend Development
        </h3>
        <div class="row g-3">
          {% for s in frontend_skills %}
            <div class="col-12">
              <div class="skill-card-premium">
                <div class="action-buttons-premium">
                  <a href="{% url 'skill_edit' s.pk %}" class="btn-edit-premium" title="Edit">
                    <i class="fa fa-edit"></i>
                  </a>
                  <a href="{% url 'skill_delete' s.pk %}" class="btn-delete-premium" title="Delete" onclick="return confirm('Delete {{ s.name }}?')">
                    <i class="fa fa-trash"></i>
                  </a>
                </div>
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <div>
                    <strong class="text-white d-block" style="font-size: 1.1rem;">{{ s.name }}</strong>
                    <span class="proficiency-badge-premium">{{ s.get_proficiency_label }}</span>
                  </div>
                  {% if s.icon_class %}
                    <i class="{{ s.icon_class }} text-warning" style="font-size: 1.8rem;"></i>
                  {% endif %}
                </div>
                <div class="skill-bar-premium">
                  <div class="skill-bar-fill-premium" style="width:{{ s.proficiency }}%"></div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <small class="text-white-50">{{ s.proficiency }}% proficiency</small>
                  <small class="text-warning">{{ s.years_of_experience }} year{{ s.years_of_experience|pluralize }}</small>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Backend Skills -->
      {% if backend_skills %}
      <div class="skill-category-premium">
        <h3 class="category-header">
          <i class="fas fa-server"></i> Backend Development
        </h3>
        <div class="row g-3">
          {% for s in backend_skills %}
            <div class="col-12">
              <div class="skill-card-premium">
                <div class="action-buttons-premium">
                  <a href="{% url 'skill_edit' s.pk %}" class="btn-edit-premium" title="Edit">
                    <i class="fa fa-edit"></i>
                  </a>
                  <a href="{% url 'skill_delete' s.pk %}" class="btn-delete-premium" title="Delete" onclick="return confirm('Delete {{ s.name }}?')">
                    <i class="fa fa-trash"></i>
                  </a>
                </div>
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <div>
                    <strong class="text-white d-block" style="font-size: 1.1rem;">{{ s.name }}</strong>
                    <span class="proficiency-badge-premium">{{ s.get_proficiency_label }}</span>
                  </div>
                  {% if s.icon_class %}
                    <i class="{{ s.icon_class }} text-warning" style="font-size: 1.8rem;"></i>
                  {% endif %}
                </div>
                <div class="skill-bar-premium">
                  <div class="skill-bar-fill-premium" style="width:{{ s.proficiency }}%"></div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <small class="text-white-50">{{ s.proficiency }}% proficiency</small>
                  <small class="text-warning">{{ s.years_of_experience }} year{{ s.years_of_experience|pluralize }}</small>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Add other skill categories similarly... -->

      {% if not skills %}
        <div class="empty-state-premium">
          <div class="empty-state-icon-premium">
            <i class="fa fa-code"></i>
          </div>
          <h3 class="text-white mb-3">No Skills Added Yet</h3>
          <p class="text-white-50 mb-4">Showcase your technical expertise by adding your skills and proficiency levels!</p>
          <a href="{% url 'skill_create' %}" class="btn btn-warning">
            <i class="fa fa-plus-circle me-2"></i>Add Your First Skill
          </a>
        </div>
      {% endif %}
    </div>

    <!-- Education & Certifications Sidebar -->
    <div class="col-lg-4 mt-5 mt-lg-0">
      <!-- Education Section -->
      <div class="section-header-premium">
        <div class="section-icon-premium">
          <i class="fa fa-university"></i>
        </div>
        <div>
          <h2 class="text-info mb-1">Education</h2>
          <p class="text-white-50 mb-0">Academic background & qualifications</p>
        </div>
        <a href="{% url 'education_create' %}" class="btn btn-sm btn-outline-info ms-auto">
          <i class="fa fa-plus"></i>
        </a>
      </div>

      {% for e in education %}
        <div class="education-card-premium">
          <div class="action-buttons-premium">
            <a href="{% url 'education_edit' e.pk %}" class="btn-edit-premium" title="Edit">
              <i class="fa fa-edit"></i>
            </a>
            <a href="{% url 'education_delete' e.pk %}" class="btn-delete-premium" title="Delete" onclick="return confirm('Delete this education record?')">
              <i class="fa fa-trash"></i>
            </a>
          </div>
          <div class="d-flex justify-content-between align-items-start mb-2">
            <strong class="text-white" style="font-size: 1.1rem;">{{ e.institution }}</strong>
            <span class="degree-badge-premium">{{ e.get_degree_display }}</span>
          </div>
          <div class="text-info mb-2" style="font-weight: 500;">{{ e.field_of_study }}</div>
          <div class="d-flex justify-content-between align-items-center mb-2">
            <small class="text-white-50">
              {{ e.start_date|date:'M Y' }} -
              {% if e.is_current %}Present{% else %}{{ e.end_date|date:'M Y' }}{% endif %}
            </small>
            {% if e.gpa %}
              <span class="gpa-badge-premium">GPA: {{ e.gpa }}</span>
            {% endif %}
          </div>
          {% if e.description %}
            <p class="text-white-50 small mb-0">{{ e.description|truncatechars:120 }}</p>
          {% endif %}
        </div>
      {% empty %}
        <div class="empty-state-premium">
          <div class="empty-state-icon-premium text-info">
            <i class="fa fa-graduation-cap"></i>
          </div>
          <p class="text-white-50 mb-3">No education records available.</p>
          <a href="{% url 'education_create' %}" class="btn btn-info">Add Education</a>
        </div>
      {% endfor %}

      <!-- Certifications Section -->
      <div class="section-header-premium mt-5">
        <div class="section-icon-premium">
          <i class="fa fa-award"></i>
        </div>
        <div>
          <h2 class="text-success mb-1">Certifications</h2>
          <p class="text-white-50 mb-0">Professional certifications & badges</p>
        </div>
        <a href="{% url 'certification_create' %}" class="btn btn-sm btn-outline-success ms-auto">
          <i class="fa fa-plus"></i>
        </a>
      </div>

      {% for c in certifications %}
        <div class="certification-card-premium">
          <div class="action-buttons-premium">
            <a href="{% url 'certification_edit' c.pk %}" class="btn-edit-premium" title="Edit">
              <i class="fa fa-edit"></i>
            </a>
            <a href="{% url 'certification_delete' c.pk %}" class="btn-delete-premium" title="Delete" onclick="return confirm('Delete this certification?')">
              <i class="fa fa-trash"></i>
            </a>
          </div>
          <strong class="text-white d-block mb-1" style="font-size: 1.1rem;">{{ c.name }}</strong>
          <small class="text-white-50 d-block mb-3">{{ c.issuing_organization }}</small>
          <div class="d-flex justify-content-between align-items-center">
            {% if c.credential_url %}
              <a href="{{ c.credential_url }}" target="_blank" class="small text-info">
                <i class="fa fa-external-link-alt me-1"></i>Verify Credential
              </a>
            {% else %}
              <span></span>
            {% endif %}
            <span class="status-badge-premium {% if c.is_expired %}status-expired-premium{% else %}status-valid-premium{% endif %}">
              {% if c.is_expired %}Expired{% else %}Valid{% endif %}
            </span>
          </div>
        </div>
      {% empty %}
        <div class="empty-state-premium">
          <div class="empty-state-icon-premium text-success">
            <i class="fa fa-award"></i>
          </div>
          <p class="text-white-50 mb-3">No certifications yet.</p>
          <a href="{% url 'certification_create' %}" class="btn btn-success">Add Certification</a>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Floating Add Button (Mobile) -->
{% if user.is_authenticated %}
  <div class="floating-add-btn-premium d-lg-none">
    <div class="dropdown dropup">
      <button class="btn btn-warning rounded-circle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="width:60px; height:60px; font-size:1.5rem;">
        <i class="fa fa-plus"></i>
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li><a class="dropdown-item" href="{% url 'skill_create' %}"><i class="fa fa-code text-warning me-2"></i>Add Skill</a></li>
        <li><a class="dropdown-item" href="{% url 'education_create' %}"><i class="fa fa-graduation-cap text-info me-2"></i>Add Education</a></li>
        <li><a class="dropdown-item" href="{% url 'certification_create' %}"><i class="fa fa-certificate text-success me-2"></i>Add Certification</a></li>
      </ul>
    </div>
  </div>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Animate skill bars on scroll
  const skillBars = document.querySelectorAll('.skill-bar-fill-premium');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const width = entry.target.style.width;
        entry.target.style.width = '0%';
        setTimeout(() => {
          entry.target.style.width = width;
        }, 300);
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.5 });

  skillBars.forEach(bar => {
    observer.observe(bar);
  });

  // Add scroll animations to cards
  const cards = document.querySelectorAll('.skill-card-premium, .education-card-premium, .certification-card-premium, .stat-card-premium');
  const cardObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, { threshold: 0.1 });

  cards.forEach(card => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';
    card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    cardObserver.observe(card);
  });

  // Add hover effects for action buttons
  const actionButtons = document.querySelectorAll('.btn-edit-premium, .btn-delete-premium');
  actionButtons.forEach(btn => {
    btn.addEventListener('mouseenter', function() {
      this.style.transform = 'scale(1.15)';
    });

    btn.addEventListener('mouseleave', function() {
      this.style.transform = 'scale(1)';
    });
  });
});
</script>
{% endblock content %}