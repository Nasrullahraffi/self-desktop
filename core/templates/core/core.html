{% extends 'core/base.html' %}
{% load static %}
{% block title %}{% if profile %}{{ profile.full_name }} | {{ SITE_TAGLINE }}{% else %}{{ SITE_NAME }}{% endif %}{% endblock title %}
{% block meta %}
{% if profile %}
<meta name="description" content="{{ profile.meta_description|default:profile.tagline|default:SITE_TAGLINE }}">
{% else %}
<meta name="description" content="{{ SITE_TAGLINE }}">
{% endif %}
{% endblock meta %}
{% block content %}
<div class="container">
  <div class="row align-items-center mt-4">
    <div class="col-md-4 text-center position-relative">
      {% if profile and profile.profile_picture %}
        <img src="{{ profile.profile_picture.url }}" alt="{{ profile.full_name }}" class="img-thumbnail" style="max-width:220px;">
      {% else %}
        <img src="{% static 'core/images/profile.png' %}" alt="Profile" class="img-thumbnail" style="max-width:220px;">
      {% endif %}
      {% if user.is_authenticated %}
        <div class="mt-2">
          <a href="{% url 'profile_edit' %}" class="btn btn-sm btn-outline-info">
            <i class="fa fa-edit"></i> Edit Profile
          </a>
        </div>
      {% endif %}
    </div>
    <div class="col-md-8 text-white">
      <h1 class="satisfy-regular mb-3">{% if profile %}{{ profile.full_name }}{% else %}Alex Johnson{% endif %}</h1>
      <h4 class="text-warning mb-3">{% if profile %}{{ profile.tagline }}{% else %}Full Stack Developer | Python & Django Specialist | Cloud Solutions Architect{% endif %}</h4>
      <p class="lead" style="font-size:1rem; line-height:1.5">
        {% if profile %}{{ profile.bio|linebreaks }}{% else %}
        Experienced Full Stack Developer with 7+ years of expertise in building scalable web applications and RESTful APIs.
        Specialized in Python frameworks including Django, Flask, and FastAPI, with extensive experience in containerization
        using Docker and orchestration with Kubernetes. Proficient in modern frontend technologies and database management
        across both SQL and NoSQL solutions. Passionate about clean code, performance optimization, and delivering
        robust solutions that exceed client expectations.
        {% endif %}
      </p>
      <div class="d-flex flex-wrap gap-2 mt-3">
        <a href="{% url 'contactus' %}" class="btn btn-outline-warning">Contact</a>
        <a href="{% url 'contactus' %}" class="btn btn-outline-success">Hire Me</a>
        {% if profile and profile.resume %}<a href="{{ profile.resume.url }}" class="btn btn-outline-info" target="_blank"><i class="fa fa-download"></i> Resume</a>{% endif %}
      </div>
      {% if profile %}
      <div class="mt-4 row g-3">
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">{{ profile.years_experience }}</h3>
            <small class="text-white-50">Years Experience</small>
          </div>
        </div>
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">{{ profile.projects_completed }}</h3>
            <small class="text-white-50">Projects</small>
          </div>
        </div>
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">{{ profile.happy_clients }}</h3>
            <small class="text-white-50">Happy Clients</small>
          </div>
        </div>
      </div>
      {% else %}
      <div class="mt-4 row g-3">
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">7+</h3>
            <small class="text-white-50">Years Experience</small>
          </div>
        </div>
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">50+</h3>
            <small class="text-white-50">Projects</small>
          </div>
        </div>
        <div class="col-6 col-lg-4">
          <div class="p-3 bg-secondary rounded text-center">
            <h3 class="text-warning mb-0">35+</h3>
            <small class="text-white-50">Happy Clients</small>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>

  {% if featured_projects %}
  <section class="mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3 border-bottom border-warning pb-2">
      <h2 class="text-warning h3 mb-0"><i class="fa fa-folder-open"></i> Featured Projects</h2>
      <div class="d-flex gap-2">
        <a href="{% url 'project_create' %}" class="btn btn-warning">
          <i class="fa fa-plus-circle"></i> Add Project
        </a>
        <a href="{% url 'projects' %}" class="btn btn-outline-warning">View All</a>
      </div>
    </div>
    <div class="row g-4">
      {% for proj in featured_projects %}
        <div class="col-sm-6 col-lg-4">
          <div class="project-card h-100">
            <h5 class="text-white mb-1">{{ proj.title }}</h5>
            <small class="text-muted d-block mb-2">{{ proj.status|title }}</small>
            <p class="text-white-50 small">{{ proj.short_description|default:proj.description|truncatechars:120 }}</p>
            <div class="mb-2 small text-info">{% for tech in proj.get_technologies_list %}<span>{{ tech }}</span>{% if not forloop.last %}, {% endif %}{% endfor %}</div>
            <div class="d-flex gap-2 flex-wrap">
              {% if proj.github_url %}<a href="{{ proj.github_url }}" target="_blank" class="btn btn-sm btn-outline-light"><i class="fab fa-github"></i></a>{% endif %}
              {% if proj.live_url %}<a href="{{ proj.live_url }}" target="_blank" class="btn btn-sm btn-outline-success">Live</a>{% endif %}
              <a href="{{ proj.get_absolute_url }}" class="btn btn-sm btn-outline-warning">Details</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>
  {% else %}
  <!-- No Projects Yet - Call to Action -->
  <section class="mt-5">
    <div class="text-center p-5 bg-secondary rounded">
      <i class="fa fa-folder-plus text-warning mb-3" style="font-size: 4rem;"></i>
      <h3 class="text-white mb-3">No Projects Yet</h3>
      <p class="text-white-50 mb-4">Start showcasing your amazing work by adding your first project!</p>
      <a href="{% url 'project_create' %}" class="btn btn-warning btn-lg">
        <i class="fa fa-plus-circle"></i> Add Your First Project
      </a>
    </div>
  </section>
  {% endif %}

  {% if social_links %}
  <section class="mt-5">
    <h2 class="text-warning h4">Connect</h2>
    <div class="d-flex flex-wrap gap-2">
      {% for link in social_links %}
        <a href="{{ link.url }}" target="_blank" class="btn btn-sm btn-outline-info" aria-label="{{ link.platform|title }}"><i class="{{ link.icon_class }}"></i></a>
      {% endfor %}
    </div>
  </section>
  {% else %}
  <section class="mt-5">
    <h2 class="text-warning h4">Connect</h2>
    <div class="d-flex flex-wrap gap-2">
      <a href="https://github.com/yourusername" target="_blank" class="btn btn-sm btn-outline-info" aria-label="GitHub"><i class="fab fa-github"></i></a>
      <a href="https://linkedin.com/in/yourprofile" target="_blank" class="btn btn-sm btn-outline-info" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
      <a href="https://twitter.com/yourhandle" target="_blank" class="btn btn-sm btn-outline-info" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="https://stackoverflow.com/users/yourid" target="_blank" class="btn btn-sm btn-outline-info" aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
    </div>
  </section>
  {% endif %}

  {% if testimonials %}
  <section class="mt-5">
    <h2 class="text-warning h4 mb-3">Testimonials</h2>
    <div class="row g-4">
      {% for t in testimonials %}
        <div class="col-md-6 col-lg-4">
          <div class="testimonial h-100">
            <div class="d-flex align-items-center mb-2">
              {% if t.avatar %}<img src="{{ t.avatar.url }}" class="avatar-sm me-2" alt="{{ t.name }}">{% endif %}
              <div>
                <strong class="text-white">{{ t.name }}</strong><br>
                <small class="text-white-50">{{ t.position }} {% if t.company %} @ {{ t.company }}{% endif %}</small>
              </div>
            </div>
            <div class="text-warning mb-2" style="font-size:.85rem;">{% for i in "12345"|slice:":" %}{% if forloop.counter <= t.rating %}★{% else %}<span class="text-secondary">★</span>{% endif %}{% endfor %}</div>
            <p class="text-white-50 small mb-0">{{ t.testimonial|truncatechars:160 }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>
  {% else %}
  <section class="mt-5">
    <h2 class="text-warning h4 mb-3">Testimonials</h2>
    <div class="row g-4">
      <div class="col-md-6 col-lg-4">
        <div class="testimonial h-100">
          <div class="d-flex align-items-center mb-2">
            <div>
              <strong class="text-white">Sarah Mitchell</strong><br>
              <small class="text-white-50">CTO @ TechSolutions Inc.</small>
            </div>
          </div>
          <div class="text-warning mb-2" style="font-size:.85rem;">★★★★★</div>
          <p class="text-white-50 small mb-0">Exceptional developer who delivered our complex e-commerce platform ahead of schedule. Highly recommend for Django projects.</p>
        </div>
      </div>
      <div class="col-md-6 col-lg-4">
        <div class="testimonial h-100">
          <div class="d-flex align-items-center mb-2">
            <div>
              <strong class="text-white">Michael Rodriguez</strong><br>
              <small class="text-white-50">Product Manager @ DataFlow Systems</small>
            </div>
          </div>
          <div class="text-warning mb-2" style="font-size:.85rem;">★★★★★</div>
          <p class="text-white-50 small mb-0">Transformed our data visualization capabilities with a scalable FastAPI solution. Professional and highly skilled.</p>
        </div>
      </div>
      <div class="col-md-6 col-lg-4">
        <div class="testimonial h-100">
          <div class="d-flex align-items-center mb-2">
            <div>
              <strong class="text-white">Jennifer Wallace</strong><br>
              <small class="text-white-50">Startup Founder @ InnovateLabs</small>
            </div>
          </div>
          <div class="text-warning mb-2" style="font-size:.85rem;">★★★★★</div>
          <p class="text-white-50 small mb-0">Outstanding work on our microservices architecture. Expert knowledge of Docker and Kubernetes implementation.</p>
        </div>
      </div>
    </div>
  </section>
  {% endif %}
</div>

{% endblock content %}